{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/lib/comments.test.ts",
  "failures": [
    {
      "test": "Comments Infrastructure - Integration Tests Comments Position Validation should validate start_position < end_position",
      "message": "AssertionError: expected undefined to be '23514' // Object.is equality\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/lib/comments.test.ts:450:27\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"
    },
    {
      "test": "Comments Infrastructure - Integration Tests Comments Threading Behavior admin should handle parent comment deletion gracefully (SET NULL)",
      "message": "AssertionError: expected { code: 'PGRST116', â€¦(3) } to be null\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/lib/comments.test.ts:504:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"
    }
  ]
}
{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/test/bundle-optimization.test.ts",
  "failures": [
    {
      "test": "Bundle Optimization Characterization should create optimized vendor chunks for major dependencies",
      "message": "Error: Build failed with code 2\n    at ChildProcess.<anonymous> (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/test/bundle-optimization.test.ts:139:16)\n    at ChildProcess.emit (node:events:518:28)\n    at maybeClose (node:internal/child_process:1101:16)\n    at Socket.<anonymous> (node:internal/child_process:456:11)\n    at Socket.emit (node:events:518:28)\n    at Pipe.<anonymous> (node:net:351:12)"
    }
  ]
}
{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.cache.test.tsx",
  "failures": [
    {
      "test": "CommentSidebar - User Profile Cache Management should include useEffect for cache cleanup on scriptId change",
      "message": "AssertionError: expected '/**\\n * CommentSidebar.tsx - Google Dâ€¦' to contain 'userProfileCacheRef.current.clear()'\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.cache.test.tsx:91:34\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at runSuite (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n    at runSuite (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n    at runFiles (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1787:3)"
    }
  ]
}
{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.realtime.test.tsx",
  "failures": [
    {
      "test": "CommentSidebar - Realtime Subscriptions (TDD RED Phase) INSERT Event Handling should add new comment to state when INSERT event received",
      "message": "Error: Unable to find an element with the text: New comment from another user. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\nIgnored nodes: comments, script, style\n\u001b[36m<body>\u001b[39m\n  \u001b[36m<div>\u001b[39m\n    \u001b[36m<aside\u001b[39m\n      \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Sidebar\"\u001b[39m\n      \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sidebar\"\u001b[39m\n      \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n    \u001b[36m>\u001b[39m\n      \u001b[36m<div\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sticky-header\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<header\u001b[39m\n          \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Header\"\u001b[39m\n          \u001b[33mrole\u001b[39m=\u001b[32m\"banner\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<h2>\u001b[39m\n            \u001b[0mComments\u001b[0m\n          \u001b[36m</h2>\u001b[39m\n        \u001b[36m</header>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comment-filters\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"All Comments\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"active\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mAll Comments\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Open Comments\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mOpen Comments\u001b[0m\n          \u001b[36m</button>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolved Comments\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mResolved Comments\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<button\u001b[39m\n          \u001b[33maria-label\u001b[39m=\u001b[32m\"Add Script Comment\"\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"universal-comment-button\"\u001b[39m\n          \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[0mðŸ’¬ Comment on Script\u001b[0m\n        \u001b[36m</button>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n      \u001b[36m<div\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"comments-list\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"empty-state\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<p>\u001b[39m\n            \u001b[0mNo comments yet.\u001b[0m\n          \u001b[36m</p>\u001b[39m\n          \u001b[36m<p>\u001b[39m\n            \u001b[0mSelect text to add a comment.\u001b[0m\n          \u001b[36m</p>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</aside>\u001b[39m\n  \u001b[36m</div>\u001b[39m\n\u001b[36m</body>\u001b[39m\n    at Proxy.waitForWrapper (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.realtime.test.tsx:246:13\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"
    },
    {
      "test": "CommentSidebar - Realtime Subscriptions (TDD RED Phase) UPDATE Event Handling should update existing comment when UPDATE event received",
      "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[39m\u001b[2m).not.toBeInTheDocument()\u001b[22m\n\n\u001b[31mexpected document not to contain element, found <div\n  class=\"comment-content\"\n>\n  Original content\n</div> instead\u001b[39m\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[39m\n  \u001b[36m<head />\u001b[39m\n  \u001b[36m<body>\u001b[39m\n    \u001b[36m<div>\u001b[39m\n      \u001b[36m<aside\u001b[39m\n        \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Sidebar\"\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sidebar\"\u001b[39m\n        \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sticky-header\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<header\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Header\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"banner\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h2>\u001b[39m\n              \u001b[0mComments\u001b[0m\n            \u001b[36m</h2>\u001b[39m\n          \u001b[36m</header>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-filters\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"All Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"active\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAll Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Open Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOpen Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolved Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mResolved Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Add Script Comment\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"universal-comment-button\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mðŸ’¬ Comment on Script\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-list\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-thread\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<article\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"comment-card \"\u001b[39m\n              \u001b[33mdata-comment-id\u001b[39m=\u001b[32m\"comment-1\"\u001b[39m\n              \u001b[33mrole\u001b[39m=\u001b[32m\"article\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-header\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-number-badge\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m1\u001b[0m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-author\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0muser1@example.com\u001b[0m\n                \u001b[36m</span>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-date\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m10/19/2025\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-content\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mOriginal content\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-actions\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Reply\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mReply\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolve\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mResolve\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Edit\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mEdit\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Delete\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"delete-button\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDelete\u001b[0m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</article>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</aside>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</body>\u001b[39m\n\u001b[36m</html>\u001b[39m...\n    at Proxy.expectWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1745:12)\n    at Proxy.<anonymous> (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/chai/index.js:1686:25)\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.realtime.test.tsx:403:60\n    at runWithExpensiveErrorDiagnosticsDisabled (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:47:12)\n    at checkCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n    at Timeout.checkRealTimersCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
    },
    {
      "test": "CommentSidebar - Realtime Subscriptions (TDD RED Phase) UPDATE Event Handling should update resolved status when comment is resolved via Realtime",
      "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[39m\u001b[2m).toHaveClass(\u001b[22m\u001b[32m\u001b[32m\"comment-resolved\"\u001b[32m\u001b[39m\u001b[2m)\u001b[22m\n\nExpected the element to have class:\n\u001b[32m  comment-resolved\u001b[39m\nReceived:\n\u001b[31m  comment-card\u001b[39m\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[39m\n  \u001b[36m<head />\u001b[39m\n  \u001b[36m<body>\u001b[39m\n    \u001b[36m<div>\u001b[39m\n      \u001b[36m<aside\u001b[39m\n        \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Sidebar\"\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sidebar\"\u001b[39m\n        \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sticky-header\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<header\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Header\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"banner\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h2>\u001b[39m\n              \u001b[0mComments\u001b[0m\n            \u001b[36m</h2>\u001b[39m\n          \u001b[36m</header>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-filters\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"All Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"active\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAll Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Open Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOpen Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolved Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mResolved Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Add Script Comment\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"universal-comment-button\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mðŸ’¬ Comment on Script\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-list\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-thread\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<article\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"comment-card \"\u001b[39m\n              \u001b[33mdata-comment-id\u001b[39m=\u001b[32m\"comment-1\"\u001b[39m\n              \u001b[33mrole\u001b[39m=\u001b[32m\"article\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-header\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-number-badge\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m1\u001b[0m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-author\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0muser1@example.com\u001b[0m\n                \u001b[36m</span>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-date\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m10/19/2025\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-content\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNeeds review\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-actions\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Reply\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mReply\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolve\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mResolve\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Edit\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mEdit\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Delete\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"delete-button\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDelete\u001b[0m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</article>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</aside>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</body>\u001b[39m\n\u001b[36m</html>\u001b[39m...\n    at Proxy.expectWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1745:12)\n    at Proxy.<anonymous> (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/chai/index.js:1686:25)\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.realtime.test.tsx:482:29\n    at runWithExpensiveErrorDiagnosticsDisabled (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:47:12)\n    at checkCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n    at Timeout.checkRealTimersCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
    },
    {
      "test": "CommentSidebar - Realtime Subscriptions (TDD RED Phase) DELETE Event Handling should remove comment from state when DELETE event received",
      "message": "Error: \u001b[2mexpect(\u001b[22m\u001b[31melement\u001b[39m\u001b[2m).not.toBeInTheDocument()\u001b[22m\n\n\u001b[31mexpected document not to contain element, found <div\n  class=\"comment-content\"\n>\n  Will be deleted\n</div> instead\u001b[39m\n\nIgnored nodes: comments, script, style\n\u001b[36m<html>\u001b[39m\n  \u001b[36m<head />\u001b[39m\n  \u001b[36m<body>\u001b[39m\n    \u001b[36m<div>\u001b[39m\n      \u001b[36m<aside\u001b[39m\n        \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Sidebar\"\u001b[39m\n        \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sidebar\"\u001b[39m\n        \u001b[33mrole\u001b[39m=\u001b[32m\"complementary\"\u001b[39m\n      \u001b[36m>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-sticky-header\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<header\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Comments Header\"\u001b[39m\n            \u001b[33mrole\u001b[39m=\u001b[32m\"banner\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h2>\u001b[39m\n              \u001b[0mComments\u001b[0m\n            \u001b[36m</h2>\u001b[39m\n          \u001b[36m</header>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-filters\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"All Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"active\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mAll Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Open Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mOpen Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolved Comments\"\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mResolved Comments\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<button\u001b[39m\n            \u001b[33maria-label\u001b[39m=\u001b[32m\"Add Script Comment\"\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"universal-comment-button\"\u001b[39m\n            \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[0mðŸ’¬ Comment on Script\u001b[0m\n          \u001b[36m</button>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"comments-list\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"comment-thread\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<article\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"comment-card \"\u001b[39m\n              \u001b[33mdata-comment-id\u001b[39m=\u001b[32m\"comment-to-delete\"\u001b[39m\n              \u001b[33mrole\u001b[39m=\u001b[32m\"article\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-header\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-number-badge\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m1\u001b[0m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-author\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0muser1@example.com\u001b[0m\n                \u001b[36m</span>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"comment-date\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0m10/19/2025\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-content\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mWill be deleted\u001b[0m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"comment-actions\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Reply\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mReply\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Resolve\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mResolve\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Edit\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mEdit\u001b[0m\n                \u001b[36m</button>\u001b[39m\n                \u001b[36m<button\u001b[39m\n                  \u001b[33maria-label\u001b[39m=\u001b[32m\"Delete\"\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"delete-button\"\u001b[39m\n                  \u001b[33mtype\u001b[39m=\u001b[32m\"button\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDelete\u001b[0m\n                \u001b[36m</button>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</article>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</aside>\u001b[39m\n    \u001b[36m</div>\u001b[39m\n  \u001b[36m</body>\u001b[39m\n\u001b[36m</html>\u001b[39m...\n    at Proxy.expectWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1745:12)\n    at Proxy.<anonymous> (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/chai/index.js:1686:25)\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.realtime.test.tsx:544:59\n    at runWithExpensiveErrorDiagnosticsDisabled (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:47:12)\n    at checkCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:124:77)\n    at Timeout.checkRealTimersCallback (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n    at listOnTimeout (node:internal/timers:594:17)\n    at processTimers (node:internal/timers:529:7)"
    }
  ]
}
{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.reconnection.test.tsx",
  "failures": [
    {
      "test": "CommentSidebar - Reconnection Timer Safety should include cancellation check in reconnection timer (RED STATE)",
      "message": "AssertionError: expected '/**\\n * CommentSidebar.tsx - Google Dâ€¦' to contain 'isCancelledRef'\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.reconnection.test.tsx:25:34\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at runSuite (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n    at runSuite (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)\n    at runFiles (file:///Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/@vitest/runner/dist/chunk-hooks.js:1787:3)"
    }
  ]
}
{
  "file": "/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.test.tsx",
  "failures": [
    {
      "test": "CommentSidebar Comment Creation should call onCommentCreated when form is submitted",
      "message": "TypeError: Cannot read properties of undefined (reading 'parentCommentId')\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/core/state/useCommentSidebar.ts:371:35\n    at Array.filter (<anonymous>)\n    at /Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/core/state/useCommentSidebar.ts:371:8\n    at updateMemo (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/react-dom/cjs/react-dom.development.js:16427:19)\n    at Object.useMemo (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/react-dom/cjs/react-dom.development.js:17067:16)\n    at useMemo (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/react/cjs/react.development.js:1650:21)\n    at useCommentSidebar (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/core/state/useCommentSidebar.ts:354:19)\n    at CommentSidebar (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/src/components/comments/CommentSidebar.tsx:82:7)\n    at renderWithHooks (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/react-dom/cjs/react-dom.development.js:15486:18)\n    at updateFunctionComponent (/Volumes/HestAI-Projects/eav-ops/eav-apps/scripts-web/node_modules/react-dom/cjs/react-dom.development.js:19617:20)"
    }
  ]
}
